{% extends 'home.html' %}
{% block content %}
    <br>
    {% if specific_quiz == 'none' %}
        <div class="down">
            <div class="boxgrid">
                {% for quiz in quizs %}
                    <div class="box">
                        <div class="qname">
                            <h1 class="name">{{quiz.title}}</h1>
                        </div>
                        <div class="box">
                            <div class="qbody">
                                {% if quiz.pic %}
                                <img src="{{quiz.pic.url}}" alt="Quiz image" class="pic"/>
                                {% else %}
                                <p class="textpic">No Image</p>
                                {% endif %}
                            </div>
                            <div class="tag-box">
                                {% for tag in quiz.tags.all %}
                                    <span class="tag">{{ tag.name }}</span>
                                    {% empty %}
                                    <span class="tag">Untagged</span>
                                {% endfor %}
                            </div>
                            <form method="post" action="{% url 'quiz editor' %}">
                                {% csrf_token %}
                                <input hidden value="{{quiz.pk}}" name="pk">
                                <button type="submit" class="gamebtn"></button>
                            </form>
                            <p class="btnt">Edit</p>
                            <form method="post">
                                {% csrf_token %}
                                <input hidden value="{{quiz.id}}" name="delete_quiz">
                                <button type="submit" class="deletebtn"></button>
                            </form>
                            <p class="delt">Delete</p>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    {% else %}
    <br>
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        {% if quiz_form.errors %}
            <h2>Errors:</h2>
            <p>{{quiz_form.errors}}</p>
        {% endif %}
        <h3>Name of Quiz</h3>
        <p>{{quiz_form.title}}</p>
        <br>
        <h3>Picture</h3>
        <p>{{quiz_form.pic}}</p>
        <br>
        <h3>Tags</h3>
        <p>{{quiz_form.tags}}</p>
        <!-- <br>
        <button id="AddQuestion" type="button">Add Question</button>
        <br> -->
        <div id="questionsContainer">
            {% for question in question_list %}
                <div class="quiz_maker_question" id="question-{{question.0}}">
                    <h3>Question {{question.0}}</h3>
                    <div>
                        <p>Question: <input required id="{{question.6}}" name="{{question.6}}" value="{{question.1.question.value}}" type="text"></p>
                        <p>Answer 1: <input required id="{{question.7.0}}answer1" name="{{question.7.0}}answer1" value="{{question.2.text.value}}" type="text"> {% if question.2.is_correct.value == False %} Correct:<input id="question_{{question.0}}answer1checkbox" name="question_{{question.0}}answer1checkbox" value="correct" type="checkbox"></p> {% else %} Correct:<input id="question_{{question.0}}answer1checkbox" name="question_{{question.0}}answer1checkbox" value="correct" checked type="checkbox"></p> {% endif %}
                        <p>Answer 2: <input required id="{{question.7.1}}answer2" name="{{question.7.1}}answer2" value="{{question.3.text.value}}" type="text"> {% if question.3.is_correct.value == False %} Correct:<input id="question_{{question.0}}answer2checkbox" name="question_{{question.0}}answer2checkbox" value="correct" type="checkbox"></p> {% else %} Correct:<input id="question_{{question.0}}answer2checkbox" name="question_{{question.0}}answer2checkbox" value="correct" checked type="checkbox"></p> {% endif %}
                        <p>Answer 3: <input required id="{{question.7.2}}answer3" name="{{question.7.2}}answer3" value="{{question.4.text.value}}" type="text"> {% if question.4.is_correct.value == False %} Correct:<input id="question_{{question.0}}answer3checkbox" name="question_{{question.0}}answer3checkbox" value="correct" type="checkbox"></p> {% else %} Correct:<input id="question_{{question.0}}answer3checkbox" name="question_{{question.0}}answer3checkbox" value="correct" checked type="checkbox"></p> {% endif %}
                        <p>Answer 4: <input required id="{{question.7.3}}answer4" name="{{question.7.3}}answer4" value="{{question.5.text.value}}" type="text"> {% if question.5.is_correct.value == False %} Correct:<input id="question_{{question.0}}answer4checkbox" name="question_{{question.0}}answer4checkbox" value="correct" type="checkbox"></p> {% else %} Correct:<input id="question_{{question.0}}answer4checkbox" name="question_{{question.0}}answer4checkbox" value="correct" checked type="checkbox"></p> {% endif %}
                        <input type="number" hidden name="pk" value="{{pk}}">
                    </div>
                        <!-- <button type="button" onclick="deleteQuestion('{{question.0}}', '{{question.8}}')">
                            Delete Question
                        </button> -->
                </div>
            {% endfor %}
        </div>
        <br>
        <button type="submit">Update Quiz</button>
    </form>
    {% endif %}
{% endblock %}